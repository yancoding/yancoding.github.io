<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="DiDf1n-FXAss2xQDKGBsVKOy6E257RvmU9T_N_UjE-A">
  <meta name="baidu-site-verification" content="code-H3ICA3MrRW">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yancoding.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="关于vim树莓派自带的vim直接使用会有一些问题，可以尝试进行安装 sudo apt-get install vim  更换软件源 编辑  sudo vim &#x2F;etc&#x2F;apt&#x2F;sources.list  更改为 #deb http:&#x2F;&#x2F;raspbian.raspberrypi.org&#x2F;raspbian&#x2F; buster main contrib non-free rpi# Uncomment lin">
<meta property="og:type" content="article">
<meta property="og:title" content="树莓派相关">
<meta property="og:url" content="https://yancoding.github.io/posts/2324bf4a4c14/index.html">
<meta property="og:site_name" content="yan blog">
<meta property="og:description" content="关于vim树莓派自带的vim直接使用会有一些问题，可以尝试进行安装 sudo apt-get install vim  更换软件源 编辑  sudo vim &#x2F;etc&#x2F;apt&#x2F;sources.list  更改为 #deb http:&#x2F;&#x2F;raspbian.raspberrypi.org&#x2F;raspbian&#x2F; buster main contrib non-free rpi# Uncomment lin">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-08_230552.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-09_204651.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-09_204852.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-10_223609.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-11_233303.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-11_233524.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-14_113226.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-14_113807.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-14_115137.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-14_120113.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-14_120227.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-14_120308.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-14_232405.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-14_083950.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-16_212327.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-16_212227.gif">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-08-02_152545.png">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-08-02_165347.png">
<meta property="og:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-08-01_225748.png">
<meta property="article:published_time" content="2020-05-23T16:01:26.000Z">
<meta property="article:modified_time" content="2024-09-05T03:11:07.987Z">
<meta property="article:author" content="yancoding">
<meta property="article:tag" content="树莓派">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yancoding.github.io/posts/2324bf4a4c14/2020-06-08_230552.gif">


<link rel="canonical" href="https://yancoding.github.io/posts/2324bf4a4c14/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://yancoding.github.io/posts/2324bf4a4c14/","path":"posts/2324bf4a4c14/","title":"树莓派相关"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>树莓派相关 | yan blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">yan blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">37</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">48</span></a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-demo"><a href="/demo/" rel="section"><i class="fa fa-rocket fa-fw"></i>Demo</a></li><li class="menu-item menu-item-component"><a href="/component/" rel="section"><i class="fa fa-th-large fa-fw"></i>Component</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8Evim"><span class="nav-text">关于vim</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%8D%A2%E8%BD%AF%E4%BB%B6%E6%BA%90"><span class="nav-text">更换软件源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85nginx"><span class="nav-text">安装nginx</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%92%AD%E6%94%BE%E9%9F%B3%E9%A2%91"><span class="nav-text">播放音频</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8aplay%E6%92%AD%E6%94%BE"><span class="nav-text">1.使用aplay播放</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8omxplayer%E6%92%AD%E6%94%BE"><span class="nav-text">2.使用omxplayer播放</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BD%BF%E7%94%A8%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8moc%E6%92%AD%E6%94%BE"><span class="nav-text">3.使用音乐播放器moc播放</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81"><span class="nav-text">查看系统运行状态</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8top%E5%91%BD%E4%BB%A4"><span class="nav-text">1.使用top命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8htop%E5%91%BD%E4%BB%A4"><span class="nav-text">2.使用htop命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8ffmpeg%E5%91%BD%E4%BB%A4%E5%BD%95%E5%88%B6%E8%A7%86%E9%A2%91"><span class="nav-text">使用ffmpeg命令录制视频</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rtmp%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E6%B5%81"><span class="nav-text">rtmp服务器推流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-rtmp%E6%9C%8D%E5%8A%A1"><span class="nav-text">1.rtmp服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%89%8D%E7%AB%AF"><span class="nav-text">2.前端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-ffmpeg%E5%91%BD%E4%BB%A4%E6%8E%A8%E6%B5%81"><span class="nav-text">3.ffmpeg命令推流</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E6%8E%A8%E6%B5%81"><span class="nav-text">本地文件推流</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%91%84%E5%83%8F%E5%A4%B4%E6%8E%A8%E6%B5%81"><span class="nav-text">摄像头推流</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E8%93%9D%E7%89%99%E9%9F%B3%E7%AE%B1"><span class="nav-text">连接蓝牙音箱</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BCPU%E6%B8%A9%E5%BA%A6"><span class="nav-text">查看CPU温度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81ip"><span class="nav-text">设置静态ip</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D"><span class="nav-text">修改主机名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98"><span class="nav-text">挂载硬盘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85samba%E6%9C%8D%E5%8A%A1"><span class="nav-text">安装samba服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99%E9%80%9F%E5%BA%A6%E6%B5%8B%E8%AF%95"><span class="nav-text">磁盘读写速度测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%85%B3%E9%97%ADusb%E7%94%B5%E6%BA%90%E8%BE%93%E5%87%BA"><span class="nav-text">如何关闭usb电源输出</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="yancoding"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">yancoding</p>
  <div class="site-description" itemprop="description">yan blog</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">48</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yancoding" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yancoding" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/yancoding" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yancoding.github.io/posts/2324bf4a4c14/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="yancoding">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yan blog">
      <meta itemprop="description" content="yan blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="树莓派相关 | yan blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          树莓派相关
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-05-24 00:01:26" itemprop="dateCreated datePublished" datetime="2020-05-24T00:01:26+08:00">2020-05-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-09-05 11:11:07" itemprop="dateModified" datetime="2024-09-05T11:11:07+08:00">2024-09-05</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="关于vim"><a href="#关于vim" class="headerlink" title="关于vim"></a>关于vim</h2><p>树莓派自带的vim直接使用会有一些问题，可以尝试进行安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure>

<h2 id="更换软件源"><a href="#更换软件源" class="headerlink" title="更换软件源"></a>更换软件源</h2><p> 编辑</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<p>更改为</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">#deb http://raspbian.raspberrypi.org/raspbian/ buster main contrib non-free rpi</span><br><span class="line"># Uncomment line below then &#x27;apt-get update&#x27; to enable &#x27;apt-get source&#x27;</span><br><span class="line">#deb-src http://raspbian.raspberrypi.org/raspbian/ buster main contrib non-free rpi</span><br><span class="line"></span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ bullseye main non-free contrib rpi</span><br><span class="line"># Uncomment line below then &#x27;apt-get update&#x27; to enable &#x27;apt-get source&#x27;</span><br><span class="line"># deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ bullseye main non-free contrib rpi</span><br></pre></td></tr></table></figure>

<p> 编辑</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list.d/raspi.list</span><br></pre></td></tr></table></figure>

<p>更改为</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">#deb http://archive.raspberrypi.org/debian/ buster main</span><br><span class="line"># Uncomment line below then &#x27;apt-get update&#x27; to enable &#x27;apt-get source&#x27;</span><br><span class="line">#deb-src http://archive.raspberrypi.org/debian/ buster main</span><br><span class="line"></span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ bullseye main</span><br><span class="line"># Uncomment line below then &#x27;apt-get update&#x27; to enable &#x27;apt-get source&#x27;</span><br><span class="line">#deb-src http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ bullseye main</span><br></pre></td></tr></table></figure>

<p>即注释了原有源，修改源为国内的Tsinghua镜像</p>
<p>可用镜像可以查看<a target="_blank" rel="noopener" href="https://www.raspbian.org/RaspbianMirrors">https://www.raspbian.org/RaspbianMirrors</a></p>
<p>更新软件源列表 <code>sudo apt-get update</code></p>
<p>更新软件<code>sudo apt-get upgrade</code></p>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/raspbian/">Raspbian 镜像使用帮助</a></li>
</ul>
<h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><p>nginx 可用<code>apt-get</code>命令直接进行安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>

<p>安装成功后，默认nginx已启动(重启后依然运行中，说明已经开机自启)，在局域网直接访问树莓派ip，即可看到nginx的欢迎界面</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Welcome to nginx!</span><br><span class="line">If you see this page, the nginx web server is successfully installed and working. Further configuration is required.</span><br><span class="line"></span><br><span class="line">For online documentation and support please refer to nginx.org.</span><br><span class="line">Commercial support is available at nginx.com.</span><br><span class="line"></span><br><span class="line">Thank you for using nginx.</span><br></pre></td></tr></table></figure>

<p><code>nginx -h</code>查看帮助</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">nginx version: nginx/1.14.2</span><br><span class="line">Usage: nginx [-?hvVtTq] [-s signal] [-c filename] [-p prefix] [-g directives]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -?,-h         : this help</span><br><span class="line">  -v            : show version and exit</span><br><span class="line">  -V            : show version and configure options then exit</span><br><span class="line">  -t            : test configuration and exit</span><br><span class="line">  -T            : test configuration, dump it and exit</span><br><span class="line">  -q            : suppress non-error messages during configuration testing</span><br><span class="line">  -s signal     : send signal to a master process: stop, quit, reopen, reload</span><br><span class="line">  -p prefix     : set prefix path (default: /usr/share/nginx/)</span><br><span class="line">  -c filename   : set configuration file (default: /etc/nginx/nginx.conf)</span><br><span class="line">  -g directives : set global directives out of configuration file</span><br></pre></td></tr></table></figure>

<p>这里比较常用的命令是<code>nginx -s [stop, quit, reopen, reload]</code>, 用于启动或停止nginx服务</p>
<p>从帮助文件里可以知道nginx的默认配置文件在<code>/etc/nginx/nginx.conf</code>, 网站文件目录在<code>/var/www/html/</code></p>
<h2 id="播放音频"><a href="#播放音频" class="headerlink" title="播放音频"></a>播放音频</h2><h3 id="1-使用aplay播放"><a href="#1-使用aplay播放" class="headerlink" title="1.使用aplay播放"></a>1.使用aplay播放</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">aplay /usr/share/sounds/alsa/Rear_Right.wav</span><br></pre></td></tr></table></figure>

<p>不支持MP3</p>
<h3 id="2-使用omxplayer播放"><a href="#2-使用omxplayer播放" class="headerlink" title="2.使用omxplayer播放"></a>2.使用omxplayer播放</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">omxplayer Taylor\ Swift\ -\ Safe\ And\ Sound.mp3</span><br></pre></td></tr></table></figure>

<p>快捷键</p>
<ul>
<li>左键 - 后退10s</li>
<li>右键 - 前进10s</li>
<li>上键 - 前进10min</li>
<li>下键 - 后退10min</li>
<li>减号 - 降低音量</li>
<li>加号 - 提高音量</li>
</ul>
<h3 id="3-使用音乐播放器moc播放"><a href="#3-使用音乐播放器moc播放" class="headerlink" title="3.使用音乐播放器moc播放"></a>3.使用音乐播放器moc播放</h3><p><code>moc</code>是<code>music on console</code>的意思</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install moc</span><br></pre></td></tr></table></figure>

<p>执行<code>mocp</code>命令即可运行播放器</p>
<img src="/posts/2324bf4a4c14/2020-06-08_230552.gif" class="">

<h2 id="查看系统运行状态"><a href="#查看系统运行状态" class="headerlink" title="查看系统运行状态"></a>查看系统运行状态</h2><h3 id="1-使用top命令"><a href="#1-使用top命令" class="headerlink" title="1.使用top命令"></a>1.使用top命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure>

<img src="/posts/2324bf4a4c14/2020-06-09_204651.gif" class="">

<h3 id="2-使用htop命令"><a href="#2-使用htop命令" class="headerlink" title="2.使用htop命令"></a>2.使用htop命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">htop</span><br></pre></td></tr></table></figure>

<img src="/posts/2324bf4a4c14/2020-06-09_204852.gif" class="">

<h2 id="使用ffmpeg命令录制视频"><a href="#使用ffmpeg命令录制视频" class="headerlink" title="使用ffmpeg命令录制视频"></a>使用ffmpeg命令录制视频</h2><p>插上usb摄像头后</p>
<p>执行<code>lsusb</code>查看设备</p>
<img src="/posts/2324bf4a4c14/2020-06-10_223609.gif" class="">

<p>其中的<code>Apple, Inc. Built-in iSight</code>便是usb摄像头</p>
<p>查看ffmpeg官方文档<a target="_blank" rel="noopener" href="http://ffmpeg.org/ffmpeg.html#Video-and-Audio-grabbing">这里</a>有说如何获取音频视频到文件</p>
<blockquote>
<p>6.1 Video and Audio grabbing<br>If you specify the input format and device then ffmpeg can grab video and audio directly.</p>
<p><code>ffmpeg -f oss -i /dev/dsp -f video4linux2 -i /dev/video0 /tmp/out.mpg</code><br>Or with an ALSA audio source (mono input, card id 1) instead of OSS:</p>
<p><code>ffmpeg -f alsa -ac 1 -i hw:1 -f video4linux2 -i /dev/video0 /tmp/out.mpg</code><br>Note that you must activate the right video source and channel before launching ffmpeg with any TV viewer such as xawtv by Gerd Knorr. You also have to set the audio recording levels correctly with a standard mixer.</p>
</blockquote>
<p>树莓派上没有录音设备，所以就不录音频，只录视频画面</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -f video4linux2 -i /dev/video0 -t 10 out.mpg</span><br></pre></td></tr></table></figure>

<p>录制10s视频并保存到当前目录的out.mpg</p>
<p>这里保存的是mpg格式文件，普通播放器可能无法播放，将其转为常见的mp4格式</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -i out.mpg out.mp4</span><br></pre></td></tr></table></figure>

<h2 id="rtmp服务器推流"><a href="#rtmp服务器推流" class="headerlink" title="rtmp服务器推流"></a>rtmp服务器推流</h2><h3 id="1-rtmp服务"><a href="#1-rtmp服务" class="headerlink" title="1.rtmp服务"></a>1.rtmp服务</h3><p>创建一个文件目录， <code>npm init</code>将该目录初始化一个项目目录</p>
<p>安装<code>node-media-server</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install node-media-server</span><br></pre></td></tr></table></figure>

<p>新建主程序文件<code>vim app.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">NodeMediaServer</span> = <span class="built_in">require</span>(<span class="string">&#x27;node-media-server&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">rtmp</span>: &#123;</span><br><span class="line">        <span class="attr">port</span>: <span class="number">1935</span>,</span><br><span class="line">        <span class="attr">chunk_size</span>: <span class="number">60000</span>,</span><br><span class="line">        <span class="attr">gop_cache</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">ping</span>: <span class="number">30</span>,</span><br><span class="line">        <span class="attr">ping_timeout</span>: <span class="number">60</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">http</span>: &#123;</span><br><span class="line">        <span class="attr">port</span>: <span class="number">8000</span>,</span><br><span class="line">        <span class="attr">allow_origin</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nms = <span class="keyword">new</span> <span class="title class_">NodeMediaServer</span>(config)</span><br><span class="line"></span><br><span class="line">nms.<span class="title function_">run</span>()</span><br></pre></td></tr></table></figure>

<p>运行rtmp服务<code>node app.js</code></p>
<img src="/posts/2324bf4a4c14/2020-06-11_233303.gif" class="">

<h3 id="2-前端"><a href="#2-前端" class="headerlink" title="2.前端"></a>2.前端</h3><p>新建<code>index.html</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-cn&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/flv.js/1.5.0/flv.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">&quot;video&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;play&quot;</span>&gt;</span>播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;pause&quot;</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> videoEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;video&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> playEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;play&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> pauseEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pause&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (flvjs.<span class="title function_">isSupported</span>()) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> flvPlayer = flvjs.<span class="title function_">createPlayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&#x27;flv&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">url</span>: <span class="string">&#x27;http://192.168.1.2:8000/live/67373.flv&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        flvPlayer.<span class="title function_">attachMediaElement</span>(videoEl);</span></span><br><span class="line"><span class="language-javascript">        flvPlayer.<span class="title function_">load</span>();</span></span><br><span class="line"><span class="language-javascript">        playEl.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> flvPlayer.<span class="title function_">play</span>())</span></span><br><span class="line"><span class="language-javascript">        pauseEl.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> flvPlayer.<span class="title function_">pause</span>())</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-ffmpeg命令推流"><a href="#3-ffmpeg命令推流" class="headerlink" title="3.ffmpeg命令推流"></a>3.ffmpeg命令推流</h3><h4 id="本地文件推流"><a href="#本地文件推流" class="headerlink" title="本地文件推流"></a>本地文件推流</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -re -i Taylor\ Swift\ -\ Shake\ It\ Off.mp4 -c copy -f flv rtmp://localhost/live/67373</span><br></pre></td></tr></table></figure>

<img src="/posts/2324bf4a4c14/2020-06-11_233524.gif" class="">

<h4 id="摄像头推流"><a href="#摄像头推流" class="headerlink" title="摄像头推流"></a>摄像头推流</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -i /dev/video0 -c:v libx264 -preset superfast -tune zerolatency -c:a aac -ar 44100 -f flv rtmp://localhost/live/67373</span><br></pre></td></tr></table></figure>

<p>但是有很高的延迟，不知为什么</p>
<h2 id="连接蓝牙音箱"><a href="#连接蓝牙音箱" class="headerlink" title="连接蓝牙音箱"></a>连接蓝牙音箱</h2><p>使用<code>bluetoothctl</code>进入蓝牙</p>
<img src="/posts/2324bf4a4c14/2020-06-14_113226.gif" class="">

<p><code>list</code>用来列出蓝牙设备<br><code>show</code>用来展示蓝牙设备信息</p>
<p>启用蓝牙<code>power on</code></p>
<img src="/posts/2324bf4a4c14/2020-06-14_113807.gif" class="">

<p>扫描蓝牙<code>scan on</code></p>
<p>查看扫描到蓝牙设备<code>devices</code></p>
<img src="/posts/2324bf4a4c14/2020-06-14_115137.gif" class="">

<p>信任设备<code>trust</code>（下次系统重启会自动进行连接）</p>
<img src="/posts/2324bf4a4c14/2020-06-14_120113.gif" class="">

<p>配对<code>pair</code></p>
<img src="/posts/2324bf4a4c14/2020-06-14_120227.gif" class="">

<p>连接<code>connect</code></p>
<img src="/posts/2324bf4a4c14/2020-06-14_120308.gif" class="">

<p><code>exit</code>退出蓝牙界面</p>
<p>播放音频测试蓝颜音箱</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">aplay /usr/share/sounds/alsa/Rear_Right.wav</span><br></pre></td></tr></table></figure>

<p>发现还是只是在耳机输出，蓝牙音箱没有输出声音</p>
<p>这时需要添加配置文件<code>~/.asoundrc</code>, 这是文件是用来指定声音输出的（类似于图形界面选择声音输出至蓝牙）</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim ~/.asoundrc</span><br></pre></td></tr></table></figure>

<p>编辑该文件，没有则新建</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">pcm.!default &#123;</span><br><span class="line">        type asym</span><br><span class="line">        playback.pcm &#123;</span><br><span class="line">                type plug</span><br><span class="line">                slave.pcm &quot;output&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        capture.pcm &#123;</span><br><span class="line">                type plug</span><br><span class="line">                slave.pcm &quot;input&quot;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pcm.output &#123;</span><br><span class="line">        type bluealsa</span><br><span class="line">        device &quot;50:D2:F5:5C:00:26&quot;</span><br><span class="line">        profile &quot;a2dp&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ctl.!default &#123;</span><br><span class="line">        type bluealsa</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pcm.input &#123;</span><br><span class="line">        type bluealsa</span><br><span class="line">        device &quot;50:D2:F5:5C:00:26&quot;</span><br><span class="line">        profile &quot;sco&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>output - 音频输出<br>input - 音频输入（麦克风）</p>
<p>这里”30:21:D0:3E:1F:C1”是音箱mac地址</p>
<p>保存后重新播放，便可以将蓝牙音箱作为默认音频输出</p>
<p>注意：这样配置，mocp播放器不能正常播放（可能不能正确识别树莓派下音频配置，推荐这种情况下使用树莓派自带的<code>vlc media player</code>作为音乐播放器）</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vlc -I ncurses</span><br></pre></td></tr></table></figure>

<img src="/posts/2324bf4a4c14/2020-06-14_232405.gif" class="">

<p>或者</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vlc ~/Music</span><br></pre></td></tr></table></figure>

<p>添加指定目录到播放列表</p>
<p>在未进行蓝牙扫描时，<code>paired-devices</code>命令可以用来查看已配对设备</p>
<p><code>remove</code>命令可以用来指定移除指定设备的配对</p>
<p><code>disconnect</code>用于断开当前蓝牙连接</p>
<img src="/posts/2324bf4a4c14/2020-06-14_083950.gif" class="">

<h2 id="查看CPU温度"><a href="#查看CPU温度" class="headerlink" title="查看CPU温度"></a>查看CPU温度</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> /sys/class/thermal/thermal_zone0/temp</span><br></pre></td></tr></table></figure>

<p>所得值除以1000可以得到摄氏度单位值</p>
<img src="/posts/2324bf4a4c14/2020-06-16_212327.gif" class="">

<p>也可以使用<code>watch</code>命令，刷新温度值，默认每两秒执行一次</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">watch <span class="built_in">cat</span> /sys/class/thermal/thermal_zone0/temp</span><br></pre></td></tr></table></figure>

<img src="/posts/2324bf4a4c14/2020-06-16_212227.gif" class="">

<h2 id="设置静态ip"><a href="#设置静态ip" class="headerlink" title="设置静态ip"></a>设置静态ip</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/dhcpcd.conf</span><br></pre></td></tr></table></figure>

<p>修改相应部分为</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Example static IP configuration:</span><br><span class="line">interface eth0</span><br><span class="line">static ip_address=192.168.1.4/24</span><br><span class="line">#static ip6_address=fd51:42f8:caae:d92e::ff/64</span><br><span class="line">static routers=192.168.1.1</span><br><span class="line">#static domain_name_servers=192.168.0.1 8.8.8.8 fd51:42f8:caae:d92e::1</span><br></pre></td></tr></table></figure>

<p>wifi 下类似 interface 为 wlan0</p>
<p>重启生效</p>
<h2 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/hostname</span><br><span class="line">sudo vim /etc/hosts</span><br></pre></td></tr></table></figure>

<p>修改其中的主机名，重启生效</p>
<h2 id="挂载硬盘"><a href="#挂载硬盘" class="headerlink" title="挂载硬盘"></a>挂载硬盘</h2><p>查看磁盘分区</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo fdisk -l</span><br></pre></td></tr></table></figure>

<img src="/posts/2324bf4a4c14/2020-08-02_152545.png" class="">

<p>挂载</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mount /dev/sda1 /media</span><br></pre></td></tr></table></figure>

<p>开机自动挂载</p>
<p>编辑</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fstab</span><br></pre></td></tr></table></figure>

<p>添加一行</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">/dev/sda1       /media          ntfs    defaults,noatime        0       0</span><br></pre></td></tr></table></figure>

<p>重启</p>
<p>查看<code>df -lh</code></p>
<img src="/posts/2324bf4a4c14/2020-08-02_165347.png" class="">

<h2 id="安装samba服务"><a href="#安装samba服务" class="headerlink" title="安装samba服务"></a>安装samba服务</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install samba</span><br></pre></td></tr></table></figure>

<p>配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure>

<p>在配置文件中添加</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">[share]</span><br><span class="line">    path = /media</span><br><span class="line">    public = yes</span><br><span class="line">    writable = yes</span><br><span class="line">    browsable = yes</span><br></pre></td></tr></table></figure>

<p>访问 <code>\\192.168.1.4</code></p>
<p>如何添加用户</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo smbpasswd -a pi</span><br></pre></td></tr></table></figure>

<p>这将添加pi用户，注意密码不要与pi用户密码设一样，另设密码</p>
<p>如果在Windows上登录过后，如何清除用户登录状态</p>
<p>在cmd命令行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">net use</span><br><span class="line">net use \\192.168.1.4\raspi4-private /delete</span><br></pre></td></tr></table></figure>

<img src="/posts/2324bf4a4c14/2020-08-01_225748.png" class="">

<p>上传文件速度在30M&#x2F;s，下载速度105M&#x2F;s,有线网络连接的情况下</p>
<h2 id="磁盘读写速度测试"><a href="#磁盘读写速度测试" class="headerlink" title="磁盘读写速度测试"></a>磁盘读写速度测试</h2><p>读取速度</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install hdparm</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo hdparm -t /dev/sda1</span><br><span class="line">sudo hdparm -T /dev/sda1</span><br></pre></td></tr></table></figure>

<p>显示</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">/dev/sda1:</span><br><span class="line"> Timing buffered disk reads: 276 MB in  3.01 seconds =  91.81 MB/sec</span><br><span class="line"></span><br><span class="line">/dev/sda1:</span><br><span class="line"> Timing cached reads:   1532 MB in  2.00 seconds = 766.63 MB/sec</span><br></pre></td></tr></table></figure>

<p>写入速度</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dd if=/dev/zero of=/media/testw.dbf bs=512M count=1</span><br></pre></td></tr></table></figure>

<p>回显</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">记录了1+0 的读入</span><br><span class="line">记录了1+0 的写出</span><br><span class="line">536870912 bytes (537 MB, 512 MiB) copied, 17.697 s, 30.3 MB/s</span><br></pre></td></tr></table></figure>

<h2 id="如何关闭usb电源输出"><a href="#如何关闭usb电源输出" class="headerlink" title="如何关闭usb电源输出"></a>如何关闭usb电源输出</h2><p>安装uhubctl</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install libusb-1.0-0-dev</span><br><span class="line">git clone https://github.com/mvp/uhubctl</span><br><span class="line">cd uhubctl</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>pi4 需要uhubctl 2.4以上</p>
<p>查看usb电源状态</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo uhubctl</span><br></pre></td></tr></table></figure>

<p>关闭电源</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo uhubctl -l 1-1 -a 0</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag"># 树莓派</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/52c229c39ea7/" rel="prev" title="ubuntu安装常用软件">
                  <i class="fa fa-chevron-left"></i> ubuntu安装常用软件
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/3c0ad28a2fa4/" rel="next" title="树莓派EC20模块联网">
                  树莓派EC20模块联网 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yancoding</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">56k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">51 分钟</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"yancoding","repo":"yancoding.github.io","client_id":"1b359b39687aefe1c256","client_secret":"d8596c4b7db905f1dfe61c5b836026f93a08646a","admin_user":"yancoding","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"c8ab385b541347e852fdcd1889e46633"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
